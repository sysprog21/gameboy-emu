#pragma once

#include "cpu.h"

#define DEFINE_INC_DECODER(N)         \
    REG(N)++;                         \
    REG(f_bits.z) = (REG(N) == 0x00); \
    REG(f_bits.n) = 0;                \
    REG(f_bits.h) = ((REG(N) & 0x0F) == 0x00);

#define DEFINE_DEC_DECODER(N)         \
    REG(N)--;                         \
    REG(f_bits.z) = (REG(N) == 0x00); \
    REG(f_bits.n) = 1;                \
    REG(f_bits.h) = ((REG(N) & 0x0F) == 0x0F);

#define DEFINE_ALU_DECODER(N, FLAG)                          \
    REG(f_bits.z) = ((temp & 0xFF) == 0x00);                 \
    REG(f_bits.n) = FLAG;                                    \
    REG(f_bits.h) = (REG(a) ^ REG(N) ^ temp) & 0x10 ? 1 : 0; \
    REG(f_bits.c) = (temp & 0xFF00) ? 1 : 0;

#define DEFINE_LOGIC_DECODER(N, H, C) \
    REG(f_bits.z) = (REG(a) == 0x00); \
    REG(f_bits.n) = N;                \
    REG(f_bits.h) = H;                \
    REG(f_bits.c) = C;

#define REG(N) gb->cpu.reg.N
#define READ8(addr) __gb_read(gb, addr)
#define WRITE8(addr, value) __gb_write(gb, addr, value)

static const cpu_instr instr_table[] = {
    /* clang-format off */
/* CODE     OPCODE ARG1    ARG2    PTR/ADDR BYTES CYCLES  FLAGS */
  [0x00] = {NOP,   NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0x01] = {LD16,  REG_BC, IMM16,  0, 0,   3,     3, 3,   0},
  [0x02] = {LD,    MEM_BC, REG_A,  0, 0,   1,     2, 2,   0},
  [0x03] = {INC16, REG_BC, NONE,   0, 0,   1,     2, 2,   0},
  [0x04] = {INC,   REG_B,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x05] = {DEC,   REG_B,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x06] = {LD,    REG_B,  IMM8,   0, 0,   2,     2, 2,   0},
  [0x07] = {RLC,   REG_A,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x08] = {LD16,  MEM_16, REG_SP, 0, 0,   3,     5, 5,   0},
  [0x09] = {ADD16, REG_HL, REG_BC, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x0a] = {LD,    REG_A,  MEM_BC, 0, 0,   1,     2, 2,   0},
  [0x0b] = {DEC16, REG_BC, NONE,   0, 0,   1,     2, 2,   0},
  [0x0c] = {INC,   REG_C,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x0d] = {DEC,   REG_C,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x0e] = {LD,    REG_C,  IMM8,   0, 0,   2,     2, 2,   0},
  [0x0f] = {RRC,   REG_A,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x10] = {STOP,  NONE,   NONE,   0, 0,   2,     1, 1,   INST_FLAG_ENDS_BLOCK},
  [0x11] = {LD16,  REG_DE, IMM16,  0, 0,   3,     3, 3,   0},
  [0x12] = {LD,    MEM_DE, REG_A,  0, 0,   1,     2, 2,   0},
  [0x13] = {INC16, REG_DE, NONE,   0, 0,   1,     2, 2,   0},
  [0x14] = {INC,   REG_D,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x15] = {DEC,   REG_D,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x16] = {LD,    REG_D,  IMM8,   0, 0,   2,     2, 2,   0},
  [0x17] = {RL,    REG_A,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x18] = {JR,    NONE,   IMM8,   0, 0,   2,     3, 3,   INST_FLAG_ENDS_BLOCK},
  [0x19] = {ADD16, REG_HL, REG_DE, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x1a] = {LD,    REG_A,  MEM_DE, 0, 0,   1,     2, 2,   0},
  [0x1b] = {DEC16, REG_DE, NONE,   0, 0,   1,     2, 2,   0},
  [0x1c] = {INC,   REG_E,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x1d] = {DEC,   REG_E,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x1e] = {LD,    REG_E,  IMM8,   0, 0,   2,     2, 2,   0},
  [0x1f] = {RR,    REG_A,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x20] = {JR,    CC_NZ,  IMM8,   0, 0,   2,     3, 2,   INST_FLAG_USES_CC},
  [0x21] = {LD16,  REG_HL, IMM16,  0, 0,   3,     3, 3,   0},
  [0x22] = {LD,    MEM_INC_HL, REG_A, 0,0, 1,     2, 2,   0},
  [0x23] = {INC16, REG_HL, NONE,   0, 0,   1,     2, 2,   0},
  [0x24] = {INC,   REG_H,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x25] = {DEC,   REG_H,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x26] = {LD,    REG_H,  IMM8,   0, 0,   2,     2, 2,   0},
  [0x27] = {DAA,   NONE,   NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x28] = {JR,    CC_Z,   IMM8,   0, 0,   2,     3, 2,   INST_FLAG_USES_CC},
  [0x29] = {ADD16, REG_HL, REG_HL, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x2a] = {LD,    REG_A,  MEM_INC_HL, 0,0,1,     2, 2,   0},
  [0x2b] = {DEC16, REG_HL, NONE,   0, 0,   1,     2, 2,   0},
  [0x2c] = {INC,   REG_L,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x2d] = {DEC,   REG_L,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x2e] = {LD,    REG_L,  IMM8,   0, 0,   2,     2, 2,   0},
  [0x2f] = {CPL,   REG_A,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x30] = {JR,    CC_NC,  IMM8,   0, 0,   2,     3, 2,   INST_FLAG_USES_CC},
  [0x31] = {LD16,  REG_SP, IMM16,  0, 0,   3,     3, 3,   0},
  [0x32] = {LD,    MEM_DEC_HL, REG_A, 0,0, 1,     2, 2,   0},
  [0x33] = {INC16, REG_SP, NONE,   0, 0,   1,     2, 2,   0},
  [0x34] = {INC,   MEM_HL, NONE,   0, 0,   1,     3, 3,   INST_FLAG_AFFECTS_CC},
  [0x35] = {DEC,   MEM_HL, NONE,   0, 0,   1,     3, 3,   INST_FLAG_AFFECTS_CC},
  [0x36] = {LD,    MEM_HL, IMM8,   0, 0,   2,     3, 3,   0},
  [0x37] = {SCF,   NONE,   NONE,   0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x38] = {JR,    CC_C,   IMM8,   0, 0,   2,     3, 2,   INST_FLAG_USES_CC},
  [0x39] = {ADD16, REG_HL, REG_SP, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x3a] = {LD,    REG_A,  MEM_DEC_HL, 0,0,1,     2, 2,   0},
  [0x3b] = {DEC16, REG_SP, NONE,   0, 0,   1,     2, 2,   0},
  [0x3c] = {INC,   REG_A,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x3d] = {DEC,   REG_A,  NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x3e] = {LD,    REG_A,  IMM8,   0, 0,   2,     2, 2,   0},
  [0x3f] = {CCF,   NONE,   NONE,   0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x40] = {NOP,   NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0x41] = {LD,    REG_B,  REG_C,  0, 0,   1,     1, 1,   0},
  [0x42] = {LD,    REG_B,  REG_D,  0, 0,   1,     1, 1,   0},
  [0x43] = {LD,    REG_B,  REG_E,  0, 0,   1,     1, 1,   0},
  [0x44] = {LD,    REG_B,  REG_H,  0, 0,   1,     1, 1,   0},
  [0x45] = {LD,    REG_B,  REG_L,  0, 0,   1,     1, 1,   0},
  [0x46] = {LD,    REG_B,  MEM_HL, 0, 0,   1,     2, 2,   0},
  [0x47] = {LD,    REG_B,  REG_A,  0, 0,   1,     1, 1,   0},
  [0x48] = {LD,    REG_C,  REG_B,  0, 0,   1,     1, 1,   0},
  [0x49] = {NOP,   NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0x4a] = {LD,    REG_C,  REG_D,  0, 0,   1,     1, 1,   0},
  [0x4b] = {LD,    REG_C,  REG_E,  0, 0,   1,     1, 1,   0},
  [0x4c] = {LD,    REG_C,  REG_H,  0, 0,   1,     1, 1,   0},
  [0x4d] = {LD,    REG_C,  REG_L,  0, 0,   1,     1, 1,   0},
  [0x4e] = {LD,    REG_C,  MEM_HL, 0, 0,   1,     2, 2,   0},
  [0x4f] = {LD,    REG_C,  REG_A,  0, 0,   1,     1, 1,   0},
  [0x50] = {LD,    REG_D,  REG_B,  0, 0,   1,     1, 1,   0},
  [0x51] = {LD,    REG_D,  REG_C,  0, 0,   1,     1, 1,   0},
  [0x52] = {NOP,   NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0x53] = {LD,    REG_D,  REG_E,  0, 0,   1,     1, 1,   0},
  [0x54] = {LD,    REG_D,  REG_H,  0, 0,   1,     1, 1,   0},
  [0x55] = {LD,    REG_D,  REG_L,  0, 0,   1,     1, 1,   0},
  [0x56] = {LD,    REG_D,  MEM_HL, 0, 0,   1,     2, 2,   0},
  [0x57] = {LD,    REG_D,  REG_A,  0, 0,   1,     1, 1,   0},
  [0x58] = {LD,    REG_E,  REG_B,  0, 0,   1,     1, 1,   0},
  [0x59] = {LD,    REG_E,  REG_C,  0, 0,   1,     1, 1,   0},
  [0x5a] = {LD,    REG_E,  REG_D,  0, 0,   1,     1, 1,   0},
  [0x5b] = {NOP,   NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0x5c] = {LD,    REG_E,  REG_H,  0, 0,   1,     1, 1,   0},
  [0x5d] = {LD,    REG_E,  REG_L,  0, 0,   1,     1, 1,   0},
  [0x5e] = {LD,    REG_E,  MEM_HL, 0, 0,   1,     2, 2,   0},
  [0x5f] = {LD,    REG_E,  REG_A,  0, 0,   1,     1, 1,   0},
  [0x60] = {LD,    REG_H,  REG_B,  0, 0,   1,     1, 1,   0},
  [0x61] = {LD,    REG_H,  REG_C,  0, 0,   1,     1, 1,   0},
  [0x62] = {LD,    REG_H,  REG_D,  0, 0,   1,     1, 1,   0},
  [0x63] = {LD,    REG_H,  REG_E,  0, 0,   1,     1, 1,   0},
  [0x64] = {NOP,   NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0x65] = {LD,    REG_H,  REG_L,  0, 0,   1,     1, 1,   0},
  [0x66] = {LD,    REG_H,  MEM_HL, 0, 0,   1,     2, 2,   0},
  [0x67] = {LD,    REG_H,  REG_A,  0, 0,   1,     1, 1,   0},
  [0x68] = {LD,    REG_L,  REG_B,  0, 0,   1,     1, 1,   0},
  [0x69] = {LD,    REG_L,  REG_C,  0, 0,   1,     1, 1,   0},
  [0x6a] = {LD,    REG_L,  REG_D,  0, 0,   1,     1, 1,   0},
  [0x6b] = {LD,    REG_L,  REG_E,  0, 0,   1,     1, 1,   0},
  [0x6c] = {LD,    REG_L,  REG_H,  0, 0,   1,     1, 1,   0},
  [0x6d] = {NOP,   NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0x6e] = {LD,    REG_L,  MEM_HL, 0, 0,   1,     2, 2,   0},
  [0x6f] = {LD,    REG_L,  REG_A,  0, 0,   1,     1, 1,   0},
  [0x70] = {LD,    MEM_HL, REG_B,  0, 0,   1,     1, 1,   0},
  [0x71] = {LD,    MEM_HL, REG_C,  0, 0,   1,     1, 1,   0},
  [0x72] = {LD,    MEM_HL, REG_D,  0, 0,   1,     1, 1,   0},
  [0x73] = {LD,    MEM_HL, REG_E,  0, 0,   1,     1, 1,   0},
  [0x74] = {LD,    MEM_HL, REG_H,  0, 0,   1,     1, 1,   0},
  [0x75] = {LD,    MEM_HL, REG_L,  0, 0,   1,     1, 1,   0},
  [0x76] = {HALT,  NONE,   NONE,   0, 0,   1,     1, 1,   INST_FLAG_ENDS_BLOCK},
  [0x77] = {LD,    MEM_HL, REG_A,  0, 0,   1,     1, 1,   0},
  [0x78] = {LD,    REG_A,  REG_B,  0, 0,   1,     1, 1,   0},
  [0x79] = {LD,    REG_A,  REG_C,  0, 0,   1,     1, 1,   0},
  [0x7a] = {LD,    REG_A,  REG_D,  0, 0,   1,     1, 1,   0},
  [0x7b] = {LD,    REG_A,  REG_E,  0, 0,   1,     1, 1,   0},
  [0x7c] = {LD,    REG_A,  REG_H,  0, 0,   1,     1, 1,   0},
  [0x7d] = {LD,    REG_A,  REG_L,  0, 0,   1,     1, 1,   0},
  [0x7e] = {LD,    REG_A,  MEM_HL, 0, 0,   1,     2, 2,   0},
  [0x7f] = {NOP,   NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0x80] = {ADD,   REG_A,  REG_B,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x81] = {ADD,   REG_A,  REG_C,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x82] = {ADD,   REG_A,  REG_D,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x83] = {ADD,   REG_A,  REG_E,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x84] = {ADD,   REG_A,  REG_H,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x85] = {ADD,   REG_A,  REG_L,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x86] = {ADD,   REG_A,  MEM_HL, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x87] = {ADD,   REG_A,  REG_A,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x88] = {ADC,   REG_A,  REG_B,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x89] = {ADC,   REG_A,  REG_C,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x8a] = {ADC,   REG_A,  REG_D,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x8b] = {ADC,   REG_A,  REG_E,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x8c] = {ADC,   REG_A,  REG_H,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x8d] = {ADC,   REG_A,  REG_L,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x8e] = {ADC,   REG_A,  MEM_HL, 0, 0,   1,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x8f] = {ADC,   REG_A,  REG_A,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x90] = {SUB,   REG_A,  REG_B,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x91] = {SUB,   REG_A,  REG_C,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x92] = {SUB,   REG_A,  REG_D,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x93] = {SUB,   REG_A,  REG_E,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x94] = {SUB,   REG_A,  REG_H,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x95] = {SUB,   REG_A,  REG_L,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x96] = {SUB,   REG_A,  MEM_HL, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x97] = {SUB,   REG_A,  REG_A,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0x98] = {SBC,   REG_A,  REG_B,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x99] = {SBC,   REG_A,  REG_C,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x9a] = {SBC,   REG_A,  REG_D,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x9b] = {SBC,   REG_A,  REG_E,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x9c] = {SBC,   REG_A,  REG_H,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x9d] = {SBC,   REG_A,  REG_L,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x9e] = {SBC,   REG_A,  MEM_HL, 0, 0,   1,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x9f] = {SBC,   REG_A,  REG_A,  0, 0,   1,     1, 1,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0xa0] = {AND,   REG_A,  REG_B,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xa1] = {AND,   REG_A,  REG_C,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xa2] = {AND,   REG_A,  REG_D,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xa3] = {AND,   REG_A,  REG_E,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xa4] = {AND,   REG_A,  REG_H,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xa5] = {AND,   REG_A,  REG_L,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xa6] = {AND,   REG_A,  MEM_HL, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xa7] = {AND,   REG_A,  REG_A,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xa8] = {XOR,   REG_A,  REG_B,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xa9] = {XOR,   REG_A,  REG_C,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xaa] = {XOR,   REG_A,  REG_D,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xab] = {XOR,   REG_A,  REG_E,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xac] = {XOR,   REG_A,  REG_H,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xad] = {XOR,   REG_A,  REG_L,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xae] = {XOR,   REG_A,  MEM_HL, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xaf] = {XOR,   REG_A,  REG_A,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb0] = {OR,    REG_A,  REG_B,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb1] = {OR,    REG_A,  REG_C,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb2] = {OR,    REG_A,  REG_D,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb3] = {OR,    REG_A,  REG_E,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb4] = {OR,    REG_A,  REG_H,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb5] = {OR,    REG_A,  REG_L,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb6] = {OR,    REG_A,  MEM_HL, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xb7] = {OR,    REG_A,  REG_A,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb8] = {CP,    REG_A,  REG_B,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xb9] = {CP,    REG_A,  REG_C,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xba] = {CP,    REG_A,  REG_D,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xbb] = {CP,    REG_A,  REG_E,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xbc] = {CP,    REG_A,  REG_H,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xbd] = {CP,    REG_A,  REG_L,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xbe] = {CP,    REG_A,  MEM_HL, 0, 0,   1,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xbf] = {CP,    REG_A,  REG_A,  0, 0,   1,     1, 1,   INST_FLAG_AFFECTS_CC},
  [0xc0] = {RET,   CC_NZ,  NONE,   0, 0,   1,     5, 2,   INST_FLAG_USES_CC},
  [0xc1] = {POP,   REG_BC, NONE,   0, 0,   1,     3, 3,   0},
  [0xc2] = {JP,    CC_NZ,  IMM16,  0, 0,   3,     4, 3,   INST_FLAG_USES_CC},
  [0xc3] = {JP,    NONE,   IMM16,  0, 0,   3,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xc4] = {CALL,  CC_NZ,  IMM16,  0, 0,   3,     6, 3,   INST_FLAG_USES_CC},
  [0xc5] = {PUSH,  REG_BC, NONE,   0, 0,   1,     4, 4,   0},
  [0xc6] = {ADD,   REG_A,  IMM8,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xc7] = {RST,   NONE,   MEM_0x00, 0, 0, 1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xc8] = {RET,   CC_Z,   NONE,   0, 0,   1,     5, 2,   INST_FLAG_USES_CC},
  [0xc9] = {RET,   NONE,   NONE,   0, 0,   1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xca] = {JP,    CC_Z,   IMM16,  0, 0,   3,     4, 3,   INST_FLAG_USES_CC},
  [0xcb] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xcc] = {CALL,  CC_Z,   IMM16,  0, 0,   3,     6, 3,   INST_FLAG_USES_CC},
  [0xcd] = {CALL,  NONE,   IMM16,  0, 0,   3,     6, 6,   INST_FLAG_ENDS_BLOCK},
  [0xce] = {ADC,   REG_A,  IMM8,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0xcf] = {RST,   NONE,   MEM_0x08, 0, 0, 1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xd0] = {RET,   CC_NC,  NONE,   0, 0,   1,     5, 2,   INST_FLAG_USES_CC},
  [0xd1] = {POP,   REG_DE, NONE,   0, 0,   1,     3, 3,   0},
  [0xd2] = {JP,    CC_NC,  IMM16,  0, 0,   3,     4, 3,   INST_FLAG_USES_CC},
  [0xd3] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xd4] = {CALL,  CC_NC,  IMM16,  0, 0,   3,     6, 3,   INST_FLAG_USES_CC},
  [0xd5] = {PUSH,  REG_DE, NONE,   0, 0,   1,     4, 4,   0},
  [0xd6] = {SUB,   REG_A,  IMM8,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xd7] = {RST,   NONE,   MEM_0x10, 0, 0, 1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xd8] = {RET,   CC_C,   NONE,   0, 0,   1,     5, 2,   INST_FLAG_USES_CC},
  [0xd9] = {RETI,  NONE,   NONE,   0, 0,   1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xda] = {JP,    CC_C,   IMM16,  0, 0,   3,     4, 3,   INST_FLAG_USES_CC},
  [0xdb] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xdc] = {CALL,  CC_C,   IMM16,  0, 0,   3,     6, 3,   INST_FLAG_USES_CC},
  [0xdd] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xde] = {SBC,   REG_A,  IMM8,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0xdf] = {RST,   NONE,   MEM_0x18, 0, 0, 1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xe0] = {LD,    MEM_8,  REG_A,  0, 0,   2,     3, 3,   0},
  [0xe1] = {POP,   REG_HL, NONE,   0, 0,   1,     3, 3,   0},
  [0xe2] = {LD,    MEM_C,  REG_A,  0, 0,   1,     2, 2,   0},
  [0xe3] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xe4] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xe5] = {PUSH,  REG_HL, NONE,   0, 0,   1,     4, 4,   0},
  [0xe6] = {AND,   REG_A,  IMM8,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xe7] = {RST,   NONE,   MEM_0x20, 0, 0, 1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xe8] = {ADD16, REG_SP, IMM8,   0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0xe9] = {JP,    NONE,   MEM_HL, 0, 0,   1,     1, 1,   INST_FLAG_ENDS_BLOCK},
  [0xea] = {LD,    MEM_16, REG_A,  0, 0,   3,     4, 4,   0},
  [0xeb] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xec] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xed] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xee] = {XOR,   REG_A,  IMM8,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xef] = {RST,   NONE,   MEM_0x28, 0, 0, 1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xf0] = {LD,    REG_A,  MEM_8,  0, 0,   2,     3, 3,   0},
  [0xf1] = {POP,   REG_AF, NONE,   0, 0,   1,     3, 3,   INST_FLAG_AFFECTS_CC},
  [0xf2] = {LD,    REG_A,  MEM_C,  0, 0,   1,     2, 2,   0},
  [0xf3] = {DI,    NONE,   NONE,   0, 0,   1,     1, 1,   0},
  [0xf4] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xf5] = {PUSH,  REG_AF, NONE,   0, 0,   1,     4, 4,   INST_FLAG_USES_CC},
  [0xf6] = {OR,    REG_A,  IMM8,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xf7] = {RST,   NONE,   MEM_0x30, 0, 0, 1,     4, 4,   INST_FLAG_ENDS_BLOCK},
  [0xf8] = {LD16,  REG_HL, MEM_8,  0, 0,   2,     3, 3,   INST_FLAG_AFFECTS_CC},
  [0xf9] = {LD16,  REG_SP, REG_HL, 0, 0,   1,     2, 2,   0},
  [0xfa] = {LD,    REG_A,  MEM_16, 0, 0,   3,     4, 4,   0},
  [0xfb] = {EI,    NONE,   NONE,   0, 0,   1,     1, 1,   INST_FLAG_ENDS_BLOCK},
  [0xfc] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xfd] = {ERROR, NONE,   NONE,   0, 0,   0,     0, 0,   0},
  [0xfe] = {CP,    REG_A,  IMM8,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0xff] = {RST,   NONE,   MEM_0x38, 0, 0, 1,     4, 4,   INST_FLAG_ENDS_BLOCK}
    /* clang-format off */
};

static const cpu_instr cb_table[] = {
    /* clang-format off */
/* CODE     OPCODE ARG1    ARG2    ARGPTR  BYTES  CYCLES  FLAGS */
  [0x00] = {RLC,   REG_B,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x01] = {RLC,   REG_C,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x02] = {RLC,   REG_D,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x03] = {RLC,   REG_E,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x04] = {RLC,   REG_H,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x05] = {RLC,   REG_L,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x06] = {RLC,   MEM_HL, NONE,   0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x07] = {RLC,   REG_A,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x08] = {RRC,   REG_B,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x09] = {RRC,   REG_C,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x0a] = {RRC,   REG_D,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x0b] = {RRC,   REG_E,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x0c] = {RRC,   REG_H,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x0d] = {RRC,   REG_L,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x0e] = {RRC,   MEM_HL, NONE,   0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x0f] = {RRC,   REG_A,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x10] = {RL,    REG_B,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x11] = {RL,    REG_C,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x12] = {RL,    REG_D,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x13] = {RL,    REG_E,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x14] = {RL,    REG_H,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x15] = {RL,    REG_L,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x16] = {RL,    MEM_HL, NONE,   0, 0,   2,     4, 4,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x17] = {RL,    REG_A,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x18] = {RR,    REG_B,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x19] = {RR,    REG_C,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x1a] = {RR,    REG_D,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x1b] = {RR,    REG_E,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x1c] = {RR,    REG_H,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x1d] = {RR,    REG_L,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x1e] = {RR,    MEM_HL, NONE,   0, 0,   2,     4, 4,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x1f] = {RR,    REG_A,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_USES_CC|INST_FLAG_AFFECTS_CC},
  [0x20] = {SLA,   REG_B,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x21] = {SLA,   REG_C,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x22] = {SLA,   REG_D,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x23] = {SLA,   REG_E,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x24] = {SLA,   REG_H,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x25] = {SLA,   REG_L,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x26] = {SLA,   MEM_HL, NONE,   0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x27] = {SLA,   REG_A,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x28] = {SRA,   REG_B,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x29] = {SRA,   REG_C,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x2a] = {SRA,   REG_D,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x2b] = {SRA,   REG_E,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x2c] = {SRA,   REG_H,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x2d] = {SRA,   REG_L,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x2e] = {SRA,   MEM_HL, NONE,   0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x2f] = {SRA,   REG_A,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x30] = {SWAP,  REG_B,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x31] = {SWAP,  REG_C,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x32] = {SWAP,  REG_D,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x33] = {SWAP,  REG_E,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x34] = {SWAP,  REG_H,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x35] = {SWAP,  REG_L,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x36] = {SWAP,  MEM_HL, NONE,   0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x37] = {SWAP,  REG_A,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x38] = {SRL,   REG_B,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x39] = {SRL,   REG_C,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x3a] = {SRL,   REG_D,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x3b] = {SRL,   REG_E,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x3c] = {SRL,   REG_H,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x3d] = {SRL,   REG_L,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x3e] = {SRL,   MEM_HL, NONE,   0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x3f] = {SRL,   REG_A,  NONE,   0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x40] = {BIT,   REG_B,  BIT_0,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x41] = {BIT,   REG_C,  BIT_0,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x42] = {BIT,   REG_D,  BIT_0,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x43] = {BIT,   REG_E,  BIT_0,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x44] = {BIT,   REG_H,  BIT_0,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x45] = {BIT,   REG_L,  BIT_0,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x46] = {BIT,   MEM_HL, BIT_0,  0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x47] = {BIT,   REG_A,  BIT_0,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x48] = {BIT,   REG_B,  BIT_1,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x49] = {BIT,   REG_C,  BIT_1,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x4a] = {BIT,   REG_D,  BIT_1,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x4b] = {BIT,   REG_E,  BIT_1,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x4c] = {BIT,   REG_H,  BIT_1,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x4d] = {BIT,   REG_L,  BIT_1,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x4e] = {BIT,   MEM_HL, BIT_1,  0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x4f] = {BIT,   REG_A,  BIT_1,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x50] = {BIT,   REG_B,  BIT_2,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x51] = {BIT,   REG_C,  BIT_2,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x52] = {BIT,   REG_D,  BIT_2,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x53] = {BIT,   REG_E,  BIT_2,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x54] = {BIT,   REG_H,  BIT_2,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x55] = {BIT,   REG_L,  BIT_2,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x56] = {BIT,   MEM_HL, BIT_2,  0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x57] = {BIT,   REG_A,  BIT_2,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x58] = {BIT,   REG_B,  BIT_3,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x59] = {BIT,   REG_C,  BIT_3,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x5a] = {BIT,   REG_D,  BIT_3,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x5b] = {BIT,   REG_E,  BIT_3,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x5c] = {BIT,   REG_H,  BIT_3,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x5d] = {BIT,   REG_L,  BIT_3,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x5e] = {BIT,   MEM_HL, BIT_3,  0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x5f] = {BIT,   REG_A,  BIT_3,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x60] = {BIT,   REG_B,  BIT_4,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x61] = {BIT,   REG_C,  BIT_4,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x62] = {BIT,   REG_D,  BIT_4,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x63] = {BIT,   REG_E,  BIT_4,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x64] = {BIT,   REG_H,  BIT_4,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x65] = {BIT,   REG_L,  BIT_4,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x66] = {BIT,   MEM_HL, BIT_4,  0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x67] = {BIT,   REG_A,  BIT_4,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x68] = {BIT,   REG_B,  BIT_5,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x69] = {BIT,   REG_C,  BIT_5,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x6a] = {BIT,   REG_D,  BIT_5,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x6b] = {BIT,   REG_E,  BIT_5,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x6c] = {BIT,   REG_H,  BIT_5,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x6d] = {BIT,   REG_L,  BIT_5,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x6e] = {BIT,   MEM_HL, BIT_5,  0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x6f] = {BIT,   REG_A,  BIT_5,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x70] = {BIT,   REG_B,  BIT_6,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x71] = {BIT,   REG_C,  BIT_6,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x72] = {BIT,   REG_D,  BIT_6,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x73] = {BIT,   REG_E,  BIT_6,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x74] = {BIT,   REG_H,  BIT_6,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x75] = {BIT,   REG_L,  BIT_6,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x76] = {BIT,   MEM_HL, BIT_6,  0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x77] = {BIT,   REG_A,  BIT_6,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x78] = {BIT,   REG_B,  BIT_7,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x79] = {BIT,   REG_C,  BIT_7,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x7a] = {BIT,   REG_D,  BIT_7,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x7b] = {BIT,   REG_E,  BIT_7,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x7c] = {BIT,   REG_H,  BIT_7,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x7d] = {BIT,   REG_L,  BIT_7,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x7e] = {BIT,   MEM_HL, BIT_7,  0, 0,   2,     4, 4,   INST_FLAG_AFFECTS_CC},
  [0x7f] = {BIT,   REG_A,  BIT_7,  0, 0,   2,     2, 2,   INST_FLAG_AFFECTS_CC},
  [0x80] = {RES,   REG_B,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0x81] = {RES,   REG_C,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0x82] = {RES,   REG_D,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0x83] = {RES,   REG_E,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0x84] = {RES,   REG_H,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0x85] = {RES,   REG_L,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0x86] = {RES,   MEM_HL, BIT_0,  0, 0,   2,     4, 4,   0},
  [0x87] = {RES,   REG_A,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0x88] = {RES,   REG_B,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0x89] = {RES,   REG_C,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0x8a] = {RES,   REG_D,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0x8b] = {RES,   REG_E,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0x8c] = {RES,   REG_H,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0x8d] = {RES,   REG_L,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0x8e] = {RES,   MEM_HL, BIT_1,  0, 0,   2,     4, 4,   0},
  [0x8f] = {RES,   REG_A,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0x90] = {RES,   REG_B,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0x91] = {RES,   REG_C,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0x92] = {RES,   REG_D,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0x93] = {RES,   REG_E,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0x94] = {RES,   REG_H,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0x95] = {RES,   REG_L,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0x96] = {RES,   MEM_HL, BIT_2,  0, 0,   2,     4, 4,   0},
  [0x97] = {RES,   REG_A,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0x98] = {RES,   REG_B,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0x99] = {RES,   REG_C,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0x9a] = {RES,   REG_D,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0x9b] = {RES,   REG_E,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0x9c] = {RES,   REG_H,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0x9d] = {RES,   REG_L,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0x9e] = {RES,   MEM_HL, BIT_3,  0, 0,   2,     4, 4,   0},
  [0x9f] = {RES,   REG_A,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0xa0] = {RES,   REG_B,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xa1] = {RES,   REG_C,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xa2] = {RES,   REG_D,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xa3] = {RES,   REG_E,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xa4] = {RES,   REG_H,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xa5] = {RES,   REG_L,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xa6] = {RES,   MEM_HL, BIT_4,  0, 0,   2,     4, 4,   0},
  [0xa7] = {RES,   REG_A,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xa8] = {RES,   REG_B,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xa9] = {RES,   REG_C,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xaa] = {RES,   REG_D,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xab] = {RES,   REG_E,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xac] = {RES,   REG_H,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xad] = {RES,   REG_L,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xae] = {RES,   MEM_HL, BIT_5,  0, 0,   2,     4, 4,   0},
  [0xaf] = {RES,   REG_A,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xb0] = {RES,   REG_B,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xb1] = {RES,   REG_C,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xb2] = {RES,   REG_D,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xb3] = {RES,   REG_E,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xb4] = {RES,   REG_H,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xb5] = {RES,   REG_L,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xb6] = {RES,   MEM_HL, BIT_6,  0, 0,   2,     4, 4,   0},
  [0xb7] = {RES,   REG_A,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xb8] = {RES,   REG_B,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xb9] = {RES,   REG_C,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xba] = {RES,   REG_D,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xbb] = {RES,   REG_E,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xbc] = {RES,   REG_H,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xbd] = {RES,   REG_L,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xbe] = {RES,   MEM_HL, BIT_7,  0, 0,   2,     4, 4,   0},
  [0xbf] = {RES,   REG_A,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xc0] = {SET,   REG_B,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0xc1] = {SET,   REG_C,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0xc2] = {SET,   REG_D,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0xc3] = {SET,   REG_E,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0xc4] = {SET,   REG_H,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0xc5] = {SET,   REG_L,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0xc6] = {SET,   MEM_HL, BIT_0,  0, 0,   2,     4, 4,   0},
  [0xc7] = {SET,   REG_A,  BIT_0,  0, 0,   2,     2, 2,   0},
  [0xc8] = {SET,   REG_B,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0xc9] = {SET,   REG_C,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0xca] = {SET,   REG_D,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0xcb] = {SET,   REG_E,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0xcc] = {SET,   REG_H,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0xcd] = {SET,   REG_L,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0xce] = {SET,   MEM_HL, BIT_1,  0, 0,   2,     4, 4,   0},
  [0xcf] = {SET,   REG_A,  BIT_1,  0, 0,   2,     2, 2,   0},
  [0xd0] = {SET,   REG_B,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0xd1] = {SET,   REG_C,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0xd2] = {SET,   REG_D,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0xd3] = {SET,   REG_E,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0xd4] = {SET,   REG_H,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0xd5] = {SET,   REG_L,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0xd6] = {SET,   MEM_HL, BIT_2,  0, 0,   2,     4, 4,   0},
  [0xd7] = {SET,   REG_A,  BIT_2,  0, 0,   2,     2, 2,   0},
  [0xd8] = {SET,   REG_B,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0xd9] = {SET,   REG_C,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0xda] = {SET,   REG_D,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0xdb] = {SET,   REG_E,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0xdc] = {SET,   REG_H,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0xdd] = {SET,   REG_L,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0xde] = {SET,   MEM_HL, BIT_3,  0, 0,   2,     4, 4,   0},
  [0xdf] = {SET,   REG_A,  BIT_3,  0, 0,   2,     2, 2,   0},
  [0xe0] = {SET,   REG_B,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xe1] = {SET,   REG_C,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xe2] = {SET,   REG_D,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xe3] = {SET,   REG_E,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xe4] = {SET,   REG_H,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xe5] = {SET,   REG_L,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xe6] = {SET,   MEM_HL, BIT_4,  0, 0,   2,     4, 4,   0},
  [0xe7] = {SET,   REG_A,  BIT_4,  0, 0,   2,     2, 2,   0},
  [0xe8] = {SET,   REG_B,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xe9] = {SET,   REG_C,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xea] = {SET,   REG_D,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xeb] = {SET,   REG_E,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xec] = {SET,   REG_H,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xed] = {SET,   REG_L,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xee] = {SET,   MEM_HL, BIT_5,  0, 0,   2,     4, 4,   0},
  [0xef] = {SET,   REG_A,  BIT_5,  0, 0,   2,     2, 2,   0},
  [0xf0] = {SET,   REG_B,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xf1] = {SET,   REG_C,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xf2] = {SET,   REG_D,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xf3] = {SET,   REG_E,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xf4] = {SET,   REG_H,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xf5] = {SET,   REG_L,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xf6] = {SET,   MEM_HL, BIT_6,  0, 0,   2,     4, 4,   0},
  [0xf7] = {SET,   REG_A,  BIT_6,  0, 0,   2,     2, 2,   0},
  [0xf8] = {SET,   REG_B,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xf9] = {SET,   REG_C,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xfa] = {SET,   REG_D,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xfb] = {SET,   REG_E,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xfc] = {SET,   REG_H,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xfd] = {SET,   REG_L,  BIT_7,  0, 0,   2,     2, 2,   0},
  [0xfe] = {SET,   MEM_HL, BIT_7,  0, 0,   2,     4, 4,   0},
  [0xff] = {SET,   REG_A,  BIT_7,  0, 0,   2,     2, 2,   0},
    /* clang-format on */
};

/*
static const cpu_instr_s instr_table[] = {
    [0x00] = {"NOP", 1, false, false, op_nop},
    [0x01] = {"LD BC, %04x", 3, false, false, op_ld_bc_d16},
    [0x02] = {"LD (BC), A", 1, false, false, op_ld_bcp_a},
    [0x03] = {"INC BC", 1, false, false, op_inc_bc},
    [0x04] = {"INC B", 1, false, false, op_inc_b},
    [0x05] = {"DEC B", 1, false, false, op_dec_b},
    [0x06] = {"LD B, %02x", 2, false, false, op_ld_b_d8},
    [0x07] = {"RLCA", 1, false, false, op_rlca},
    [0x08] = {"LD (%04x), SP", 3, false, false, op_ld_a16p_sp},
    [0x09] = {"ADD HL, BC", 1, false, false, op_add_hl_bc},
    [0x0A] = {"LD A, (BC)", 1, false, false, op_ld_a_bcp},
    [0x0B] = {"DEC BC", 1, false, false, op_dec_bc},
    [0x0C] = {"INC C", 1, false, false, op_inc_c},
    [0x0D] = {"DEC C", 1, false, false, op_dec_c},
    [0x0E] = {"LD C, %02x", 2, false, false, op_ld_c_d8},
    [0x0F] = {"RRCA", 1, false, false, op_rrca},
    [0x10] = {"STOP", 1, false, false, op_stop},
    [0x11] = {"LD DE, %04x", 3, false, false, op_ld_de_d16},
    [0x12] = {"LD (DE), A", 1, false, false, op_ld_dep_a},
    [0x13] = {"INC DE", 1, false, false, op_inc_de},
    [0x14] = {"INC D", 1, false, false, op_inc_d},
    [0x15] = {"DEC D", 1, false, false, op_dec_d},
    [0x16] = {"LD D, %02x", 2, false, false, op_ld_d_d8},
    [0x17] = {"RLA", 1, false, false, op_rla},
    [0x18] = {"JR %02x", 2, true, false, op_jr_r8},
    [0x19] = {"ADD HL, DE", 1, false, false, op_add_hl_de},
    [0x1A] = {"LD A, (DE)", 1, false, false, op_ld_a_dep},
    [0x1B] = {"DEC DE", 1, false, false, op_dec_de},
    [0x1C] = {"INC E", 1, false, false, op_inc_e},
    [0x1D] = {"DEC E", 1, false, false, op_dec_e},
    [0x1E] = {"LD E, %02x", 2, false, false, op_ld_e_d8},
    [0x1F] = {"RRA", 1, false, false, op_rra},
    [0x20] = {"JR NZ, %02x", 2, true, false, op_jr_nz_r8},
    [0x21] = {"LD HL, %04x", 3, false, false, op_ld_hl_d16},
    [0x22] = {"LD (HL+), A", 1, false, false, op_ld_hlpp_a},
    [0x23] = {"INC HL", 1, false, false, op_inc_hl},
    [0x24] = {"INC H", 1, false, false, op_inc_h},
    [0x25] = {"DEC H", 1, false, false, op_dec_h},
    [0x26] = {"LD H, %02x", 2, false, false, op_ld_h_d8},
    [0x27] = {"DAA", 1, false, false, op_daa},
    [0x28] = {"JR Z, %02x", 2, true, false, op_jr_z_r8},
    [0x29] = {"ADD HL, HL", 1, false, false, op_add_hl_hl},
    [0x2A] = {"LD A, (HL+)", 1, false, false, op_ld_a_hlpp},
    [0x2B] = {"DEC HL", 1, false, false, op_dec_hl},
    [0x2C] = {"INC L", 1, false, false, op_inc_l},
    [0x2D] = {"DEC L", 1, false, false, op_dec_l},
    [0x2E] = {"LD L, %02x", 2, false, false, op_ld_l_d8},
    [0x2F] = {"CPL", 1, false, false, op_cpl},
    [0x30] = {"JR NC, %02x", 2, true, false, op_jr_nc_r8},
    [0x31] = {"LD SP, %04x", 3, false, false, op_ld_sp_d16},
    [0x32] = {"LD (HL-), A", 1, false, false, op_ld_hlmp_a},
    [0x33] = {"INC SP", 1, false, false, op_inc_sp},
    [0x34] = {"INC (HL)", 1, false, false, op_inc_hlp},
    [0x35] = {"DEC (HL)", 1, false, false, op_dec_hlp},
    [0x36] = {"LD (HL), %02x", 2, false, false, op_ld_hlp_d8},
    [0x37] = {"SCF", 1, false, false, op_scf},
    [0x38] = {"JR C, %02x", 2, true, false, op_jr_c_r8},
    [0x39] = {"ADD HL, SP", 1, false, false, op_add_hl_sp},
    [0x3A] = {"LD A, (HL-)", 1, false, false, op_ld_a_hlmp},
    [0x3B] = {"DEC SP", 1, false, false, op_dec_sp},
    [0x3C] = {"INC A", 1, false, false, op_inc_a},
    [0x3D] = {"DEC A", 1, false, false, op_dec_a},
    [0x3E] = {"LD A, %02x", 2, false, false, op_ld_a_d8},
    [0x3F] = {"CCF", 1, false, false, op_ccf},
    [0x40] = {"LD B, B", 1, false, false, op_ld_b_b},
    [0x41] = {"LD B, C", 1, false, false, op_ld_b_c},
    [0x42] = {"LD B, D", 1, false, false, op_ld_b_d},
    [0x43] = {"LD B, E", 1, false, false, op_ld_b_e},
    [0x44] = {"LD B, H", 1, false, false, op_ld_b_h},
    [0x45] = {"LD B, L", 1, false, false, op_ld_b_l},
    [0x46] = {"LD B, (HL)", 1, false, false, op_ld_b_hlp},
    [0x47] = {"LD B, A", 1, false, false, op_ld_b_a},
    [0x48] = {"LD C, B", 1, false, false, op_ld_c_b},
    [0x49] = {"LD C, C", 1, false, false, op_ld_c_c},
    [0x4A] = {"LD C, D", 1, false, false, op_ld_c_d},
    [0x4B] = {"LD C, E", 1, false, false, op_ld_c_e},
    [0x4C] = {"LD C, H", 1, false, false, op_ld_c_h},
    [0x4D] = {"LD C, L", 1, false, false, op_ld_c_l},
    [0x4E] = {"LD C, (HL)", 1, false, false, op_ld_c_hlp},
    [0x4F] = {"LD C, A", 1, false, false, op_ld_c_a},
    [0x50] = {"LD D, B", 1, false, false, op_ld_d_b},
    [0x51] = {"LD D, C", 1, false, false, op_ld_d_c},
    [0x52] = {"LD D, D", 1, false, false, op_ld_d_d},
    [0x53] = {"LD D, E", 1, false, false, op_ld_d_e},
    [0x54] = {"LD D, H", 1, false, false, op_ld_d_h},
    [0x55] = {"LD D, L", 1, false, false, op_ld_d_l},
    [0x56] = {"LD D, (HL)", 1, false, false, op_ld_d_hlp},
    [0x57] = {"LD D, A", 1, false, false, op_ld_d_a},
    [0x58] = {"LD E, B", 1, false, false, op_ld_e_b},
    [0x59] = {"LD E, C", 1, false, false, op_ld_e_c},
    [0x5A] = {"LD E, D", 1, false, false, op_ld_e_d},
    [0x5B] = {"LD E, E", 1, false, false, op_ld_e_e},
    [0x5C] = {"LD E, H", 1, false, false, op_ld_e_h},
    [0x5D] = {"LD E, L", 1, false, false, op_ld_e_l},
    [0x5E] = {"LD E, (HL)", 1, false, false, op_ld_e_hlp},
    [0x5F] = {"LD E, A", 1, false, false, op_ld_e_a},
    [0x60] = {"LD H, B", 1, false, false, op_ld_h_b},
    [0x61] = {"LD H, C", 1, false, false, op_ld_h_c},
    [0x62] = {"LD H, D", 1, false, false, op_ld_h_d},
    [0x63] = {"LD H, E", 1, false, false, op_ld_h_e},
    [0x64] = {"LD H, H", 1, false, false, op_ld_h_h},
    [0x65] = {"LD H, L", 1, false, false, op_ld_h_l},
    [0x66] = {"LD H, (HL)", 1, false, false, op_ld_h_hlp},
    [0x67] = {"LD H, A", 1, false, false, op_ld_h_a},
    [0x68] = {"LD L, B", 1, false, false, op_ld_l_b},
    [0x69] = {"LD L, C", 1, false, false, op_ld_l_c},
    [0x6A] = {"LD L, D", 1, false, false, op_ld_l_d},
    [0x6B] = {"LD L, E", 1, false, false, op_ld_l_e},
    [0x6C] = {"LD L, H", 1, false, false, op_ld_l_h},
    [0x6D] = {"LD L, L", 1, false, false, op_ld_l_l},
    [0x6E] = {"LD L, (HL)", 1, false, false, op_ld_l_hlp},
    [0x6F] = {"LD L, A", 1, false, false, op_ld_l_a},
    [0x70] = {"LD (HL), B", 1, false, false, op_ld_hlp_b},
    [0x71] = {"LD (HL), C", 1, false, false, op_ld_hlp_c},
    [0x72] = {"LD (HL), D", 1, false, false, op_ld_hlp_d},
    [0x73] = {"LD (HL), E", 1, false, false, op_ld_hlp_e},
    [0x74] = {"LD (HL), H", 1, false, false, op_ld_hlp_h},
    [0x75] = {"LD (HL), L", 1, false, false, op_ld_hlp_l},
    [0x76] = {"HALT", 1, false, false, op_halt},
    [0x77] = {"LD (HL), A", 1, false, false, op_ld_hlp_a},
    [0x78] = {"LD A, B", 1, false, false, op_ld_a_b},
    [0x79] = {"LD A, C", 1, false, false, op_ld_a_c},
    [0x7A] = {"LD A, D", 1, false, false, op_ld_a_d},
    [0x7B] = {"LD A, E", 1, false, false, op_ld_a_e},
    [0x7C] = {"LD A, H", 1, false, false, op_ld_a_h},
    [0x7D] = {"LD A, L", 1, false, false, op_ld_a_l},
    [0x7E] = {"LD A, (HL)", 1, false, false, op_ld_a_hlp},
    [0x7F] = {"LD A, A", 1, false, false, op_ld_a_a},
    [0x80] = {"ADD A, B", 1, false, false, op_add_a_b},
    [0x81] = {"ADD A, C", 1, false, false, op_add_a_c},
    [0x82] = {"ADD A, D", 1, false, false, op_add_a_d},
    [0x83] = {"ADD A, E", 1, false, false, op_add_a_e},
    [0x84] = {"ADD A, H", 1, false, false, op_add_a_h},
    [0x85] = {"ADD A, L", 1, false, false, op_add_a_l},
    [0x86] = {"ADD A, (HL)", 1, false, false, op_add_a_hlp},
    [0x87] = {"ADD A, A", 1, false, false, op_add_a_a},
    [0x88] = {"ADC A, B", 1, false, false, op_adc_a_b},
    [0x89] = {"ADC A, C", 1, false, false, op_adc_a_c},
    [0x8A] = {"ADC A, D", 1, false, false, op_adc_a_d},
    [0x8B] = {"ADC A, E", 1, false, false, op_adc_a_e},
    [0x8C] = {"ADC A, H", 1, false, false, op_adc_a_h},
    [0x8D] = {"ADC A, L", 1, false, false, op_adc_a_l},
    [0x8E] = {"ADC A, (HL)", 1, false, false, op_adc_a_hlp},
    [0x8F] = {"ADC A, A", 1, false, false, op_adc_a_a},
    [0x90] = {"SUB B", 1, false, false, op_sub_b},
    [0x91] = {"SUB C", 1, false, false, op_sub_c},
    [0x92] = {"SUB D", 1, false, false, op_sub_d},
    [0x93] = {"SUB E", 1, false, false, op_sub_e},
    [0x94] = {"SUB H", 1, false, false, op_sub_h},
    [0x95] = {"SUB L", 1, false, false, op_sub_l},
    [0x96] = {"SUB (HL)", 1, false, false, op_sub_hlp},
    [0x97] = {"SUB A", 1, false, false, op_sub_a},
    [0x98] = {"SBC A, B", 1, false, false, op_sbc_a_b},
    [0x99] = {"SBC A, C", 1, false, false, op_sbc_a_c},
    [0x9A] = {"SBC A, D", 1, false, false, op_sbc_a_d},
    [0x9B] = {"SBC A, E", 1, false, false, op_sbc_a_e},
    [0x9C] = {"SBC A, H", 1, false, false, op_sbc_a_h},
    [0x9D] = {"SBC A, L", 1, false, false, op_sbc_a_l},
    [0x9E] = {"SBC A, (HL)", 1, false, false, op_sbc_a_hlp},
    [0x9F] = {"SBC A, A", 1, false, false, op_sbc_a_a},
    [0xA0] = {"AND B", 1, false, false, op_and_b},
    [0xA1] = {"AND C", 1, false, false, op_and_c},
    [0xA2] = {"AND D", 1, false, false, op_and_d},
    [0xA3] = {"AND E", 1, false, false, op_and_e},
    [0xA4] = {"AND H", 1, false, false, op_and_h},
    [0xA5] = {"AND L", 1, false, false, op_and_l},
    [0xA6] = {"AND (HL)", 1, false, false, op_and_hlp},
    [0xA7] = {"AND A", 1, false, false, op_and_a},
    [0xA8] = {"XOR B", 1, false, false, op_xor_b},
    [0xA9] = {"XOR C", 1, false, false, op_xor_c},
    [0xAA] = {"XOR D", 1, false, false, op_xor_d},
    [0xAB] = {"XOR E", 1, false, false, op_xor_e},
    [0xAC] = {"XOR H", 1, false, false, op_xor_h},
    [0xAD] = {"XOR L", 1, false, false, op_xor_l},
    [0xAE] = {"XOR (HL)", 1, false, false, op_xor_hlp},
    [0xAF] = {"XOR A", 1, false, false, op_xor_a},
    [0xB0] = {"OR B", 1, false, false, op_or_b},
    [0xB1] = {"OR C", 1, false, false, op_or_c},
    [0xB2] = {"OR D", 1, false, false, op_or_d},
    [0xB3] = {"OR E", 1, false, false, op_or_e},
    [0xB4] = {"OR H", 1, false, false, op_or_h},
    [0xB5] = {"OR L", 1, false, false, op_or_l},
    [0xB6] = {"OR (HL)", 1, false, false, op_or_hlp},
    [0xB7] = {"OR A", 1, false, false, op_or_a},
    [0xB8] = {"CP B", 1, false, false, op_cp_b},
    [0xB9] = {"CP C", 1, false, false, op_cp_c},
    [0xBA] = {"CP D", 1, false, false, op_cp_d},
    [0xBB] = {"CP E", 1, false, false, op_cp_e},
    [0xBC] = {"CP H", 1, false, false, op_cp_h},
    [0xBD] = {"CP L", 1, false, false, op_cp_l},
    [0xBE] = {"CP (HL)", 1, false, false, op_cp_hlp},
    [0xBF] = {"CP A", 1, false, false, op_cp_a},
    [0xC0] = {"RET NZ", 1, false, false, op_ret_nz},
    [0xC1] = {"POP BC", 1, false, false, op_pop_bc},
    [0xC2] = {"JP NZ, %04x", 3, false, false, op_jp_nz_a16},
    [0xC3] = {"JP %04x", 3, false, false, op_jp_a16},
    [0xC4] = {"CALL NZ, %04x", 3, false, false, op_call_nz_a16},
    [0xC5] = {"PUSH BC", 1, false, false, op_push_bc},
    [0xC6] = {"ADD A, %02x", 2, false, false, op_add_a_d8},
    [0xC7] = {"RST 00H", 1, false, false, op_rst_00h},
    [0xC8] = {"RET Z", 1, false, false, op_ret_z},
    [0xC9] = {"RET", 1, false, false, op_ret},
    [0xCA] = {"JP Z, %04x", 3, false, false, op_jp_z_a16},
    [0xCB] = {"PREFIX CB", 1, false, false, op_prefix_cb},
    [0xCC] = {"CALL Z, %04x", 3, false, false, op_call_z_a16},
    [0xCD] = {"CALL %04x", 3, false, false, op_call_a16},
    [0xCE] = {"ADC A, %02x", 2, false, false, op_adc_a_d8},
    [0xCF] = {"RST 08H", 1, false, false, op_rst_08h},
    [0xD0] = {"RET NC", 1, false, false, op_ret_nc},
    [0xD1] = {"POP DE", 1, false, false, op_pop_de},
    [0xD2] = {"JP NC, %04x", 3, false, false, op_jp_nc_a16},
    [0xD3] = {"NOP", 1, false, false, op_nop},
    [0xD4] = {"CALL NC, %04x", 3, false, false, op_call_nc_a16},
    [0xD5] = {"PUSH DE", 1, false, false, op_push_de},
    [0xD6] = {"SUB %02x", 2, false, false, op_sub_d8},
    [0xD7] = {"RST 10H", 1, false, false, op_rst_10h},
    [0xD8] = {"RET C", 1, false, false, op_ret_c},
    [0xD9] = {"RETI", 1, false, false, op_reti},
    [0xDA] = {"JP C, %04x", 3, false, false, op_jp_c_a16},
    [0xDB] = {"NOP", 1, false, false, op_nop},
    [0xDC] = {"CALL C, %04x", 3, false, false, op_call_c_a16},
    [0xDD] = {"NOP", 1, false, false, op_nop},
    [0xDE] = {"SBC A, %02x", 2, false, false, op_sbc_a_d8},
    [0xDF] = {"RST 18H", 1, false, false, op_rst_18h},
    [0xE0] = {"LDH (%02x), A", 2, false, false, op_ldh_a8p_a},
    [0xE1] = {"POP HL", 1, false, false, op_pop_hl},
    [0xE2] = {"LD (C), A", 1, false, false, op_ld_cp_a},
    [0xE3] = {"NOP", 1, false, false, op_nop},
    [0xE4] = {"NOP", 1, false, false, op_nop},
    [0xE5] = {"PUSH HL", 1, false, false, op_push_hl},
    [0xE6] = {"AND %02x", 2, false, false, op_and_d8},
    [0xE7] = {"RST 20H", 1, false, false, op_rst_20h},
    [0xE8] = {"ADD SP, %02x", 2, true, false, op_add_sp_r8},
    [0xE9] = {"JP (HL)", 1, false, false, op_jp_hlp},
    [0xEA] = {"LD (%04x), A", 3, false, false, op_ld_a16p_a},
    [0xEB] = {"NOP", 1, false, false, op_nop},
    [0xEC] = {"NOP", 1, false, false, op_nop},
    [0xED] = {"NOP", 1, false, false, op_nop},
    [0xEE] = {"XOR %02x", 2, false, false, op_xor_d8},
    [0xEF] = {"RST 28H", 1, false, false, op_rst_28h},
    [0xF0] = {"LDH A, (%02x)", 2, false, false, op_ldh_a_a8p},
    [0xF1] = {"POP AF", 1, false, false, op_pop_af},
    [0xF2] = {"LD A, (C)", 1, false, false, op_ld_a_cp},
    [0xF3] = {"DI", 1, false, false, op_di},
    [0xF4] = {"NOP", 1, false, false, op_nop},
    [0xF5] = {"PUSH AF", 1, false, false, op_push_af},
    [0xF6] = {"OR %02x", 2, false, false, op_or_d8},
    [0xF7] = {"RST 30H", 1, false, false, op_rst_30h},
    [0xF8] = {"LD HL, SP+%02x", 2, true, false, op_ld_hl_sppr8},
    [0xF9] = {"LD SP, HL", 1, false, false, op_ld_sp_hl},
    [0xFA] = {"LD A, (%04x)", 3, false, false, op_ld_a_a16p},
    [0xFB] = {"EI", 1, false, false, op_ei},
    [0xFC] = {"NOP", 1, false, false, op_nop},
    [0xFD] = {"NOP", 1, false, false, op_nop},
    [0xFE] = {"CP %02x", 2, false, false, op_cp_d8},
    [0xFF] = {"RST 38H", 1, false, false, op_rst_38h}
};

static const cpu_instr_s cb_instr_table[] = {
    [0x00] = {"RLC B", 2, false, true, op_rlc_b},
    [0x01] = {"RLC C", 2, false, true, op_rlc_c},
    [0x02] = {"RLC D", 2, false, true, op_rlc_d},
    [0x03] = {"RLC E", 2, false, true, op_rlc_e},
    [0x04] = {"RLC H", 2, false, true, op_rlc_h},
    [0x05] = {"RLC L", 2, false, true, op_rlc_l},
    [0x06] = {"RLC (HL)", 2, false, true, op_rlc_hlp},
    [0x07] = {"RLC A", 2, false, true, op_rlc_a},
    [0x08] = {"RRC B", 2, false, true, op_rrc_b},
    [0x09] = {"RRC C", 2, false, true, op_rrc_c},
    [0x0A] = {"RRC D", 2, false, true, op_rrc_d},
    [0x0B] = {"RRC E", 2, false, true, op_rrc_e},
    [0x0C] = {"RRC H", 2, false, true, op_rrc_h},
    [0x0D] = {"RRC L", 2, false, true, op_rrc_l},
    [0x0E] = {"RRC (HL)", 2, false, true, op_rrc_hlp},
    [0x0F] = {"RRC A", 2, false, true, op_rrc_a},
    [0x10] = {"RL B", 2, false, true, op_rl_b},
    [0x11] = {"RL C", 2, false, true, op_rl_c},
    [0x12] = {"RL D", 2, false, true, op_rl_d},
    [0x13] = {"RL E", 2, false, true, op_rl_e},
    [0x14] = {"RL H", 2, false, true, op_rl_h},
    [0x15] = {"RL L", 2, false, true, op_rl_l},
    [0x16] = {"RL (HL)", 2, false, true, op_rl_hlp},
    [0x17] = {"RL A", 2, false, true, op_rl_a},
    [0x18] = {"RR B", 2, false, true, op_rr_b},
    [0x19] = {"RR C", 2, false, true, op_rr_c},
    [0x1A] = {"RR D", 2, false, true, op_rr_d},
    [0x1B] = {"RR E", 2, false, true, op_rr_e},
    [0x1C] = {"RR H", 2, false, true, op_rr_h},
    [0x1D] = {"RR L", 2, false, true, op_rr_l},
    [0x1E] = {"RR (HL)", 2, false, true, op_rr_hlp},
    [0x1F] = {"RR A", 2, false, true, op_rr_a},
    [0x20] = {"SLA B", 2, false, true, op_sla_b},
    [0x21] = {"SLA C", 2, false, true, op_sla_c},
    [0x22] = {"SLA D", 2, false, true, op_sla_d},
    [0x23] = {"SLA E", 2, false, true, op_sla_e},
    [0x24] = {"SLA H", 2, false, true, op_sla_h},
    [0x25] = {"SLA L", 2, false, true, op_sla_l},
    [0x26] = {"SLA (HL)", 2, false, true, op_sla_hlp},
    [0x27] = {"SLA A", 2, false, true, op_sla_a},
    [0x28] = {"SRA B", 2, false, true, op_sra_b},
    [0x29] = {"SRA C", 2, false, true, op_sra_c},
    [0x2A] = {"SRA D", 2, false, true, op_sra_d},
    [0x2B] = {"SRA E", 2, false, true, op_sra_e},
    [0x2C] = {"SRA H", 2, false, true, op_sra_h},
    [0x2D] = {"SRA L", 2, false, true, op_sra_l},
    [0x2E] = {"SRA (HL)", 2, false, true, op_sra_hlp},
    [0x2F] = {"SRA A", 2, false, true, op_sra_a},
    [0x30] = {"SWAP B", 2, false, true, op_swap_b},
    [0x31] = {"SWAP C", 2, false, true, op_swap_c},
    [0x32] = {"SWAP D", 2, false, true, op_swap_d},
    [0x33] = {"SWAP E", 2, false, true, op_swap_e},
    [0x34] = {"SWAP H", 2, false, true, op_swap_h},
    [0x35] = {"SWAP L", 2, false, true, op_swap_l},
    [0x36] = {"SWAP (HL)", 2, false, true, op_swap_hlp},
    [0x37] = {"SWAP A", 2, false, true, op_swap_a},
    [0x38] = {"SRL B", 2, false, true, op_srl_b},
    [0x39] = {"SRL C", 2, false, true, op_srl_c},
    [0x3A] = {"SRL D", 2, false, true, op_srl_d},
    [0x3B] = {"SRL E", 2, false, true, op_srl_e},
    [0x3C] = {"SRL H", 2, false, true, op_srl_h},
    [0x3D] = {"SRL L", 2, false, true, op_srl_l},
    [0x3E] = {"SRL (HL)", 2, false, true, op_srl_hlp},
    [0x3F] = {"SRL A", 2, false, true, op_srl_a},
    [0x40] = {"BIT 0, B", 2, false, true, op_bit_0_b},
    [0x41] = {"BIT 0, C", 2, false, true, op_bit_0_c},
    [0x42] = {"BIT 0, D", 2, false, true, op_bit_0_d},
    [0x43] = {"BIT 0, E", 2, false, true, op_bit_0_e},
    [0x44] = {"BIT 0, H", 2, false, true, op_bit_0_h},
    [0x45] = {"BIT 0, L", 2, false, true, op_bit_0_l},
    [0x46] = {"BIT 0, (HL)", 2, false, true, op_bit_0_hlp},
    [0x47] = {"BIT 0, A", 2, false, true, op_bit_0_a},
    [0x48] = {"BIT 1, B", 2, false, true, op_bit_1_b},
    [0x49] = {"BIT 1, C", 2, false, true, op_bit_1_c},
    [0x4A] = {"BIT 1, D", 2, false, true, op_bit_1_d},
    [0x4B] = {"BIT 1, E", 2, false, true, op_bit_1_e},
    [0x4C] = {"BIT 1, H", 2, false, true, op_bit_1_h},
    [0x4D] = {"BIT 1, L", 2, false, true, op_bit_1_l},
    [0x4E] = {"BIT 1, (HL)", 2, false, true, op_bit_1_hlp},
    [0x4F] = {"BIT 1, A", 2, false, true, op_bit_1_a},
    [0x50] = {"BIT 2, B", 2, false, true, op_bit_2_b},
    [0x51] = {"BIT 2, C", 2, false, true, op_bit_2_c},
    [0x52] = {"BIT 2, D", 2, false, true, op_bit_2_d},
    [0x53] = {"BIT 2, E", 2, false, true, op_bit_2_e},
    [0x54] = {"BIT 2, H", 2, false, true, op_bit_2_h},
    [0x55] = {"BIT 2, L", 2, false, true, op_bit_2_l},
    [0x56] = {"BIT 2, (HL)", 2, false, true, op_bit_2_hlp},
    [0x57] = {"BIT 2, A", 2, false, true, op_bit_2_a},
    [0x58] = {"BIT 3, B", 2, false, true, op_bit_3_b},
    [0x59] = {"BIT 3, C", 2, false, true, op_bit_3_c},
    [0x5A] = {"BIT 3, D", 2, false, true, op_bit_3_d},
    [0x5B] = {"BIT 3, E", 2, false, true, op_bit_3_e},
    [0x5C] = {"BIT 3, H", 2, false, true, op_bit_3_h},
    [0x5D] = {"BIT 3, L", 2, false, true, op_bit_3_l},
    [0x5E] = {"BIT 3, (HL)", 2, false, true, op_bit_3_hlp},
    [0x5F] = {"BIT 3, A", 2, false, true, op_bit_3_a},
    [0x60] = {"BIT 4, B", 2, false, true, op_bit_4_b},
    [0x61] = {"BIT 4, C", 2, false, true, op_bit_4_c},
    [0x62] = {"BIT 4, D", 2, false, true, op_bit_4_d},
    [0x63] = {"BIT 4, E", 2, false, true, op_bit_4_e},
    [0x64] = {"BIT 4, H", 2, false, true, op_bit_4_h},
    [0x65] = {"BIT 4, L", 2, false, true, op_bit_4_l},
    [0x66] = {"BIT 4, (HL)", 2, false, true, op_bit_4_hlp},
    [0x67] = {"BIT 4, A", 2, false, true, op_bit_4_a},
    [0x68] = {"BIT 5, B", 2, false, true, op_bit_5_b},
    [0x69] = {"BIT 5, C", 2, false, true, op_bit_5_c},
    [0x6A] = {"BIT 5, D", 2, false, true, op_bit_5_d},
    [0x6B] = {"BIT 5, E", 2, false, true, op_bit_5_e},
    [0x6C] = {"BIT 5, H", 2, false, true, op_bit_5_h},
    [0x6D] = {"BIT 5, L", 2, false, true, op_bit_5_l},
    [0x6E] = {"BIT 5, (HL)", 2, false, true, op_bit_5_hlp},
    [0x6F] = {"BIT 5, A", 2, false, true, op_bit_5_a},
    [0x70] = {"BIT 6, B", 2, false, true, op_bit_6_b},
    [0x71] = {"BIT 6, C", 2, false, true, op_bit_6_c},
    [0x72] = {"BIT 6, D", 2, false, true, op_bit_6_d},
    [0x73] = {"BIT 6, E", 2, false, true, op_bit_6_e},
    [0x74] = {"BIT 6, H", 2, false, true, op_bit_6_h},
    [0x75] = {"BIT 6, L", 2, false, true, op_bit_6_l},
    [0x76] = {"BIT 6, (HL)", 2, false, true, op_bit_6_hlp},
    [0x77] = {"BIT 6, A", 2, false, true, op_bit_6_a},
    [0x78] = {"BIT 7, B", 2, false, true, op_bit_7_b},
    [0x79] = {"BIT 7, C", 2, false, true, op_bit_7_c},
    [0x7A] = {"BIT 7, D", 2, false, true, op_bit_7_d},
    [0x7B] = {"BIT 7, E", 2, false, true, op_bit_7_e},
    [0x7C] = {"BIT 7, H", 2, false, true, op_bit_7_h},
    [0x7D] = {"BIT 7, L", 2, false, true, op_bit_7_l},
    [0x7E] = {"BIT 7, (HL)", 2, false, true, op_bit_7_hlp},
    [0x7F] = {"BIT 7, A", 2, false, true, op_bit_7_a},
    [0x80] = {"RES 0, B", 2, false, true, op_res_0_b},
    [0x81] = {"RES 0, C", 2, false, true, op_res_0_c},
    [0x82] = {"RES 0, D", 2, false, true, op_res_0_d},
    [0x83] = {"RES 0, E", 2, false, true, op_res_0_e},
    [0x84] = {"RES 0, H", 2, false, true, op_res_0_h},
    [0x85] = {"RES 0, L", 2, false, true, op_res_0_l},
    [0x86] = {"RES 0, (HL)", 2, false, true, op_res_0_hlp},
    [0x87] = {"RES 0, A", 2, false, true, op_res_0_a},
    [0x88] = {"RES 1, B", 2, false, true, op_res_1_b},
    [0x89] = {"RES 1, C", 2, false, true, op_res_1_c},
    [0x8A] = {"RES 1, D", 2, false, true, op_res_1_d},
    [0x8B] = {"RES 1, E", 2, false, true, op_res_1_e},
    [0x8C] = {"RES 1, H", 2, false, true, op_res_1_h},
    [0x8D] = {"RES 1, L", 2, false, true, op_res_1_l},
    [0x8E] = {"RES 1, (HL)", 2, false, true, op_res_1_hlp},
    [0x8F] = {"RES 1, A", 2, false, true, op_res_1_a},
    [0x90] = {"RES 2, B", 2, false, true, op_res_2_b},
    [0x91] = {"RES 2, C", 2, false, true, op_res_2_c},
    [0x92] = {"RES 2, D", 2, false, true, op_res_2_d},
    [0x93] = {"RES 2, E", 2, false, true, op_res_2_e},
    [0x94] = {"RES 2, H", 2, false, true, op_res_2_h},
    [0x95] = {"RES 2, L", 2, false, true, op_res_2_l},
    [0x96] = {"RES 2, (HL)", 2, false, true, op_res_2_hlp},
    [0x97] = {"RES 2, A", 2, false, true, op_res_2_a},
    [0x98] = {"RES 3, B", 2, false, true, op_res_3_b},
    [0x99] = {"RES 3, C", 2, false, true, op_res_3_c},
    [0x9A] = {"RES 3, D", 2, false, true, op_res_3_d},
    [0x9B] = {"RES 3, E", 2, false, true, op_res_3_e},
    [0x9C] = {"RES 3, H", 2, false, true, op_res_3_h},
    [0x9D] = {"RES 3, L", 2, false, true, op_res_3_l},
    [0x9E] = {"RES 3, (HL)", 2, false, true, op_res_3_hlp},
    [0x9F] = {"RES 3, A", 2, false, true, op_res_3_a},
    [0xA0] = {"RES 4, B", 2, false, true, op_res_4_b},
    [0xA1] = {"RES 4, C", 2, false, true, op_res_4_c},
    [0xA2] = {"RES 4, D", 2, false, true, op_res_4_d},
    [0xA3] = {"RES 4, E", 2, false, true, op_res_4_e},
    [0xA4] = {"RES 4, H", 2, false, true, op_res_4_h},
    [0xA5] = {"RES 4, L", 2, false, true, op_res_4_l},
    [0xA6] = {"RES 4, (HL)", 2, false, true, op_res_4_hlp},
    [0xA7] = {"RES 4, A", 2, false, true, op_res_4_a},
    [0xA8] = {"RES 5, B", 2, false, true, op_res_5_b},
    [0xA9] = {"RES 5, C", 2, false, true, op_res_5_c},
    [0xAA] = {"RES 5, D", 2, false, true, op_res_5_d},
    [0xAB] = {"RES 5, E", 2, false, true, op_res_5_e},
    [0xAC] = {"RES 5, H", 2, false, true, op_res_5_h},
    [0xAD] = {"RES 5, L", 2, false, true, op_res_5_l},
    [0xAE] = {"RES 5, (HL)", 2, false, true, op_res_5_hlp},
    [0xAF] = {"RES 5, A", 2, false, true, op_res_5_a},
    [0xB0] = {"RES 6, B", 2, false, true, op_res_6_b},
    [0xB1] = {"RES 6, C", 2, false, true, op_res_6_c},
    [0xB2] = {"RES 6, D", 2, false, true, op_res_6_d},
    [0xB3] = {"RES 6, E", 2, false, true, op_res_6_e},
    [0xB4] = {"RES 6, H", 2, false, true, op_res_6_h},
    [0xB5] = {"RES 6, L", 2, false, true, op_res_6_l},
    [0xB6] = {"RES 6, (HL)", 2, false, true, op_res_6_hlp},
    [0xB7] = {"RES 6, A", 2, false, true, op_res_6_a},
    [0xB8] = {"RES 7, B", 2, false, true, op_res_7_b},
    [0xB9] = {"RES 7, C", 2, false, true, op_res_7_c},
    [0xBA] = {"RES 7, D", 2, false, true, op_res_7_d},
    [0xBB] = {"RES 7, E", 2, false, true, op_res_7_e},
    [0xBC] = {"RES 7, H", 2, false, true, op_res_7_h},
    [0xBD] = {"RES 7, L", 2, false, true, op_res_7_l},
    [0xBE] = {"RES 7, (HL)", 2, false, true, op_res_7_hlp},
    [0xBF] = {"RES 7, A", 2, false, true, op_res_7_a},
    [0xC0] = {"SET 0, B", 2, false, true, op_set_0_b},
    [0xC1] = {"SET 0, C", 2, false, true, op_set_0_c},
    [0xC2] = {"SET 0, D", 2, false, true, op_set_0_d},
    [0xC3] = {"SET 0, E", 2, false, true, op_set_0_e},
    [0xC4] = {"SET 0, H", 2, false, true, op_set_0_h},
    [0xC5] = {"SET 0, L", 2, false, true, op_set_0_l},
    [0xC6] = {"SET 0, (HL)", 2, false, true, op_set_0_hlp},
    [0xC7] = {"SET 0, A", 2, false, true, op_set_0_a},
    [0xC8] = {"SET 1, B", 2, false, true, op_set_1_b},
    [0xC9] = {"SET 1, C", 2, false, true, op_set_1_c},
    [0xCA] = {"SET 1, D", 2, false, true, op_set_1_d},
    [0xCB] = {"SET 1, E", 2, false, true, op_set_1_e},
    [0xCC] = {"SET 1, H", 2, false, true, op_set_1_h},
    [0xCD] = {"SET 1, L", 2, false, true, op_set_1_l},
    [0xCE] = {"SET 1, (HL)", 2, false, true, op_set_1_hlp},
    [0xCF] = {"SET 1, A", 2, false, true, op_set_1_a},
    [0xD0] = {"SET 2, B", 2, false, true, op_set_2_b},
    [0xD1] = {"SET 2, C", 2, false, true, op_set_2_c},
    [0xD2] = {"SET 2, D", 2, false, true, op_set_2_d},
    [0xD3] = {"SET 2, E", 2, false, true, op_set_2_e},
    [0xD4] = {"SET 2, H", 2, false, true, op_set_2_h},
    [0xD5] = {"SET 2, L", 2, false, true, op_set_2_l},
    [0xD6] = {"SET 2, (HL)", 2, false, true, op_set_2_hlp},
    [0xD7] = {"SET 2, A", 2, false, true, op_set_2_a},
    [0xD8] = {"SET 3, B", 2, false, true, op_set_3_b},
    [0xD9] = {"SET 3, C", 2, false, true, op_set_3_c},
    [0xDA] = {"SET 3, D", 2, false, true, op_set_3_d},
    [0xDB] = {"SET 3, E", 2, false, true, op_set_3_e},
    [0xDC] = {"SET 3, H", 2, false, true, op_set_3_h},
    [0xDD] = {"SET 3, L", 2, false, true, op_set_3_l},
    [0xDE] = {"SET 3, (HL)", 2, false, true, op_set_3_hlp},
    [0xDF] = {"SET 3, A", 2, false, true, op_set_3_a},
    [0xE0] = {"SET 4, B", 2, false, true, op_set_4_b},
    [0xE1] = {"SET 4, C", 2, false, true, op_set_4_c},
    [0xE2] = {"SET 4, D", 2, false, true, op_set_4_d},
    [0xE3] = {"SET 4, E", 2, false, true, op_set_4_e},
    [0xE4] = {"SET 4, H", 2, false, true, op_set_4_h},
    [0xE5] = {"SET 4, L", 2, false, true, op_set_4_l},
    [0xE6] = {"SET 4, (HL)", 2, false, true, op_set_4_hlp},
    [0xE7] = {"SET 4, A", 2, false, true, op_set_4_a},
    [0xE8] = {"SET 5, B", 2, false, true, op_set_5_b},
    [0xE9] = {"SET 5, C", 2, false, true, op_set_5_c},
    [0xEA] = {"SET 5, D", 2, false, true, op_set_5_d},
    [0xEB] = {"SET 5, E", 2, false, true, op_set_5_e},
    [0xEC] = {"SET 5, H", 2, false, true, op_set_5_h},
    [0xED] = {"SET 5, L", 2, false, true, op_set_5_l},
    [0xEE] = {"SET 5, (HL)", 2, false, true, op_set_5_hlp},
    [0xEF] = {"SET 5, A", 2, false, true, op_set_5_a},
    [0xF0] = {"SET 6, B", 2, false, true, op_set_6_b},
    [0xF1] = {"SET 6, C", 2, false, true, op_set_6_c},
    [0xF2] = {"SET 6, D", 2, false, true, op_set_6_d},
    [0xF3] = {"SET 6, E", 2, false, true, op_set_6_e},
    [0xF4] = {"SET 6, H", 2, false, true, op_set_6_h},
    [0xF5] = {"SET 6, L", 2, false, true, op_set_6_l},
    [0xF6] = {"SET 6, (HL)", 2, false, true, op_set_6_hlp},
    [0xF7] = {"SET 6, A", 2, false, true, op_set_6_a},
    [0xF8] = {"SET 7, B", 2, false, true, op_set_7_b},
    [0xF9] = {"SET 7, C", 2, false, true, op_set_7_c},
    [0xFA] = {"SET 7, D", 2, false, true, op_set_7_d},
    [0xFB] = {"SET 7, E", 2, false, true, op_set_7_e},
    [0xFC] = {"SET 7, H", 2, false, true, op_set_7_h},
    [0xFD] = {"SET 7, L", 2, false, true, op_set_7_l},
    [0xFE] = {"SET 7, (HL)", 2, false, true, op_set_7_hlp},
    [0xFF] = {"SET 7, A", 2, false, true, op_set_7_a}
};
*/
